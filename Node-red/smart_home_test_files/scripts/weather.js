document.addEventListener("DOMContentLoaded", load);

function load() {
    // var wheather=msg.payload;
    //  var wheather=msg.payload;

    var wheather = "{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"},{\"id\":701,\"main\":\"Mist\",\"description\":\"mist\",\"icon\":\"50d\"}],\"base\":\"stations\",\"main\":{\"temp\":279.48,\"feels_like\":275.13,\"temp_min\":279.15,\"temp_max\":279.82,\"pressure\":1002,\"humidity\":100},\"visibility\":3500,\"wind\":{\"speed\":5,\"deg\":190},\"rain\":{\"1h\":0.11},\"clouds\":{\"all\":75},\"dt\":1612449242,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612415098,\"sunset\":1612449779},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
    var forecast="{\"cod\":\"200\",\"message\":0,\"cnt\":40,\"list\":[{\"dt\":1613401200,\"main\":{\"temp\":266.07,\"feels_like\":261.49,\"temp_min\":265.01,\"temp_max\":266.07,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1008,\"humidity\":79,\"temp_kf\":1.06},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":2.16,\"deg\":343},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-15 15:00:00\"},{\"dt\":1613412000,\"main\":{\"temp\":264.36,\"feels_like\":259.46,\"temp_min\":263.61,\"temp_max\":264.36,\"pressure\":1026,\"sea_level\":1026,\"grnd_level\":1008,\"humidity\":89,\"temp_kf\":0.75},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":50},\"wind\":{\"speed\":2.61,\"deg\":351},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-15 18:00:00\"},{\"dt\":1613422800,\"main\":{\"temp\":263.16,\"feels_like\":258.34,\"temp_min\":262.89,\"temp_max\":263.16,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":93,\"temp_kf\":0.27},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":6},\"wind\":{\"speed\":2.42,\"deg\":358},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-15 21:00:00\"},{\"dt\":1613433600,\"main\":{\"temp\":262.29,\"feels_like\":257.44,\"temp_min\":262.25,\"temp_max\":262.29,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":95,\"temp_kf\":0.04},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":10},\"wind\":{\"speed\":2.41,\"deg\":4},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-16 00:00:00\"},{\"dt\":1613444400,\"main\":{\"temp\":261.66,\"feels_like\":256.84,\"temp_min\":261.66,\"temp_max\":261.66,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":26},\"wind\":{\"speed\":2.31,\"deg\":1},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-16 03:00:00\"},{\"dt\":1613455200,\"main\":{\"temp\":261.61,\"feels_like\":256.15,\"temp_min\":261.61,\"temp_max\":261.61,\"pressure\":1028,\"sea_level\":1028,\"grnd_level\":1009,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":41},\"wind\":{\"speed\":3.22,\"deg\":349},\"visibility\":9833,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-16 06:00:00\"},{\"dt\":1613466000,\"main\":{\"temp\":263.85,\"feels_like\":258.13,\"temp_min\":263.85,\"temp_max\":263.85,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":3.78,\"deg\":350},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-16 09:00:00\"},{\"dt\":1613476800,\"main\":{\"temp\":264.87,\"feels_like\":259.72,\"temp_min\":264.87,\"temp_max\":264.87,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":96},\"wind\":{\"speed\":3.05,\"deg\":354},\"visibility\":7205,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-16 12:00:00\"},{\"dt\":1613487600,\"main\":{\"temp\":263.14,\"feels_like\":257.28,\"temp_min\":263.14,\"temp_max\":263.14,\"pressure\":1026,\"sea_level\":1026,\"grnd_level\":1008,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.92,\"deg\":339},\"visibility\":6307,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-16 15:00:00\"},{\"dt\":1613498400,\"main\":{\"temp\":261.32,\"feels_like\":255.36,\"temp_min\":261.32,\"temp_max\":261.32,\"pressure\":1028,\"sea_level\":1028,\"grnd_level\":1009,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":99},\"wind\":{\"speed\":3.9,\"deg\":345},\"visibility\":3741,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-16 18:00:00\"},{\"dt\":1613509200,\"main\":{\"temp\":260.15,\"feels_like\":255.21,\"temp_min\":260.15,\"temp_max\":260.15,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":86},\"wind\":{\"speed\":2.35,\"deg\":341},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-16 21:00:00\"},{\"dt\":1613520000,\"main\":{\"temp\":259.31,\"feels_like\":254.44,\"temp_min\":259.31,\"temp_max\":259.31,\"pressure\":1026,\"sea_level\":1026,\"grnd_level\":1007,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":63},\"wind\":{\"speed\":2.18,\"deg\":340},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-17 00:00:00\"},{\"dt\":1613530800,\"main\":{\"temp\":259.01,\"feels_like\":254.77,\"temp_min\":259.01,\"temp_max\":259.01,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1007,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":1.24,\"deg\":344},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-17 03:00:00\"},{\"dt\":1613541600,\"main\":{\"temp\":259.3,\"feels_like\":254.49,\"temp_min\":259.3,\"temp_max\":259.3,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1006,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":3},\"wind\":{\"speed\":2.07,\"deg\":325},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-17 06:00:00\"},{\"dt\":1613552400,\"main\":{\"temp\":263.13,\"feels_like\":259.27,\"temp_min\":263.13,\"temp_max\":263.13,\"pressure\":1023,\"sea_level\":1023,\"grnd_level\":1005,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":5},\"wind\":{\"speed\":0.96,\"deg\":332},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-17 09:00:00\"},{\"dt\":1613563200,\"main\":{\"temp\":265.03,\"feels_like\":260.94,\"temp_min\":265.03,\"temp_max\":265.03,\"pressure\":1021,\"sea_level\":1021,\"grnd_level\":1003,\"humidity\":83,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":1.42,\"deg\":267},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-17 12:00:00\"},{\"dt\":1613574000,\"main\":{\"temp\":264.63,\"feels_like\":260.76,\"temp_min\":264.63,\"temp_max\":264.63,\"pressure\":1020,\"sea_level\":1020,\"grnd_level\":1002,\"humidity\":88,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.15,\"deg\":272},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-17 15:00:00\"},{\"dt\":1613584800,\"main\":{\"temp\":264.17,\"feels_like\":259.96,\"temp_min\":264.17,\"temp_max\":264.17,\"pressure\":1020,\"sea_level\":1020,\"grnd_level\":1002,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.62,\"deg\":240},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-17 18:00:00\"},{\"dt\":1613595600,\"main\":{\"temp\":263.95,\"feels_like\":259.55,\"temp_min\":263.95,\"temp_max\":263.95,\"pressure\":1019,\"sea_level\":1019,\"grnd_level\":1001,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":98},\"wind\":{\"speed\":1.86,\"deg\":220},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-17 21:00:00\"},{\"dt\":1613606400,\"main\":{\"temp\":263.77,\"feels_like\":259.17,\"temp_min\":263.77,\"temp_max\":263.77,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1001,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":93},\"wind\":{\"speed\":2.13,\"deg\":222},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-18 00:00:00\"},{\"dt\":1613617200,\"main\":{\"temp\":264.05,\"feels_like\":259.63,\"temp_min\":264.05,\"temp_max\":264.05,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":999,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.91,\"deg\":209},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-18 03:00:00\"},{\"dt\":1613628000,\"main\":{\"temp\":265.15,\"feels_like\":260.59,\"temp_min\":265.15,\"temp_max\":265.15,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":999,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.22,\"deg\":188},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-18 06:00:00\"},{\"dt\":1613638800,\"main\":{\"temp\":267.89,\"feels_like\":263.39,\"temp_min\":267.89,\"temp_max\":267.89,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":999,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.39,\"deg\":189},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-18 09:00:00\"},{\"dt\":1613649600,\"main\":{\"temp\":268.23,\"feels_like\":264.63,\"temp_min\":268.23,\"temp_max\":268.23,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":998,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.29,\"deg\":132},\"visibility\":4981,\"pop\":0.04,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-18 12:00:00\"},{\"dt\":1613660400,\"main\":{\"temp\":267.59,\"feels_like\":262.95,\"temp_min\":267.59,\"temp_max\":267.59,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":998,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.72,\"deg\":50},\"visibility\":6164,\"pop\":0.29,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-18 15:00:00\"},{\"dt\":1613671200,\"main\":{\"temp\":266.54,\"feels_like\":260.19,\"temp_min\":266.54,\"temp_max\":266.54,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1000,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":98},\"wind\":{\"speed\":5.03,\"deg\":36},\"visibility\":10000,\"pop\":0.25,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-18 18:00:00\"},{\"dt\":1613682000,\"main\":{\"temp\":265.37,\"feels_like\":258.4,\"temp_min\":265.37,\"temp_max\":265.37,\"pressure\":1019,\"sea_level\":1019,\"grnd_level\":1002,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":5.72,\"deg\":35},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-18 21:00:00\"},{\"dt\":1613692800,\"main\":{\"temp\":264.43,\"feels_like\":257.62,\"temp_min\":264.43,\"temp_max\":264.43,\"pressure\":1022,\"sea_level\":1022,\"grnd_level\":1004,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":21},\"wind\":{\"speed\":5.38,\"deg\":29},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-19 00:00:00\"},{\"dt\":1613703600,\"main\":{\"temp\":263.1,\"feels_like\":256.31,\"temp_min\":263.1,\"temp_max\":263.1,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1006,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":5.25,\"deg\":24},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-19 03:00:00\"},{\"dt\":1613714400,\"main\":{\"temp\":262.74,\"feels_like\":256.43,\"temp_min\":262.74,\"temp_max\":262.74,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1008,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":4},\"wind\":{\"speed\":4.52,\"deg\":22},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-19 06:00:00\"},{\"dt\":1613725200,\"main\":{\"temp\":265.49,\"feels_like\":259.55,\"temp_min\":265.49,\"temp_max\":265.49,\"pressure\":1028,\"sea_level\":1028,\"grnd_level\":1010,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":7},\"wind\":{\"speed\":4.23,\"deg\":22},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-19 09:00:00\"},{\"dt\":1613736000,\"main\":{\"temp\":267.62,\"feels_like\":262.25,\"temp_min\":267.62,\"temp_max\":267.62,\"pressure\":1028,\"sea_level\":1028,\"grnd_level\":1011,\"humidity\":87,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":4},\"wind\":{\"speed\":3.61,\"deg\":15},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-19 12:00:00\"},{\"dt\":1613746800,\"main\":{\"temp\":265.72,\"feels_like\":260.57,\"temp_min\":265.72,\"temp_max\":265.72,\"pressure\":1029,\"sea_level\":1029,\"grnd_level\":1011,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":72},\"wind\":{\"speed\":3.16,\"deg\":2},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-19 15:00:00\"},{\"dt\":1613757600,\"main\":{\"temp\":263.94,\"feels_like\":259.15,\"temp_min\":263.94,\"temp_max\":263.94,\"pressure\":1031,\"sea_level\":1031,\"grnd_level\":1012,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":75},\"wind\":{\"speed\":2.49,\"deg\":4},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-19 18:00:00\"},{\"dt\":1613768400,\"main\":{\"temp\":262.87,\"feels_like\":258.28,\"temp_min\":262.87,\"temp_max\":262.87,\"pressure\":1031,\"sea_level\":1031,\"grnd_level\":1013,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.08,\"deg\":358},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-19 21:00:00\"},{\"dt\":1613779200,\"main\":{\"temp\":262.12,\"feels_like\":257.68,\"temp_min\":262.12,\"temp_max\":262.12,\"pressure\":1032,\"sea_level\":1032,\"grnd_level\":1014,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":1.79,\"deg\":352},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-20 00:00:00\"},{\"dt\":1613790000,\"main\":{\"temp\":261.33,\"feels_like\":256.72,\"temp_min\":261.33,\"temp_max\":261.33,\"pressure\":1032,\"sea_level\":1032,\"grnd_level\":1014,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":1.95,\"deg\":332},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-20 03:00:00\"},{\"dt\":1613800800,\"main\":{\"temp\":261.73,\"feels_like\":257.42,\"temp_min\":261.73,\"temp_max\":261.73,\"pressure\":1033,\"sea_level\":1033,\"grnd_level\":1015,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":6},\"wind\":{\"speed\":1.51,\"deg\":351},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-20 06:00:00\"},{\"dt\":1613811600,\"main\":{\"temp\":265.51,\"feels_like\":261.92,\"temp_min\":265.51,\"temp_max\":265.51,\"pressure\":1033,\"sea_level\":1033,\"grnd_level\":1015,\"humidity\":84,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":34},\"wind\":{\"speed\":0.78,\"deg\":294},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-20 09:00:00\"},{\"dt\":1613822400,\"main\":{\"temp\":267.77,\"feels_like\":263.72,\"temp_min\":267.77,\"temp_max\":267.77,\"pressure\":1033,\"sea_level\":1033,\"grnd_level\":1015,\"humidity\":83,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":61},\"wind\":{\"speed\":1.67,\"deg\":279},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-20 12:00:00\"}],\"city\":{\"id\":709930,\"name\":\"Dnipro\",\"coord\":{\"lat\":48.45,\"lon\":34.9833},\"country\":\"UA\",\"population\":1032822,\"timezone\":7200,\"sunrise\":1613364459,\"sunset\":1613401260}}";
    var forecast2="payload: \"{\"cod\":\"200\",\"message\":0,\"cnt\":40,\"list\":[{\"dt\":1613401200,\"main\":{\"temp\":266.07,\"feels_like\":261.49,\"temp_min\":265.01,\"temp_max\":266.07,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1008,\"humidity\":79,\"temp_kf\":1.06},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":42},\"wind\":{\"speed\":2.16,\"deg\":343},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-02-15 15:00:00\"},{\"dt\":1613412000,\"main\":{\"temp\":264.36,\"feels_like\":259.46,\"temp_min\":263.61,\"temp_max\":264.36,\"pressure\":1026,\"sea_level\":1026,\"grnd_level\":1008,\"humidity\":89,\"temp_kf\":0.75},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":34},\"wind\":{\"speed\":2.61,\"deg\":351},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-02-15 18:00:00\"},{\"dt\":1613422800,\"main\":{\"temp\":263.16,\"feels_like\":258.34,\"temp_min\":262.89,\"temp_max\":263.16,\"pressure\":1027,\"sea_level\":1027,\"grnd_level\":1009,\"humidity\":93,\"temp_kf\":0.27},\"w...\"\n";
    // var wheather2="{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"base\":\"stations\",\"main\":{\"temp\":267.1,\"feels_like\":257.04,\"temp_min\":267.04,\"temp_max\":267.15,\"pressure\":1018,\"humidity\":73},\"visibility\":10000,\"wind\":{\"speed\":10,\"deg\":320},\"clouds\":{\"all\":75},\"dt\":1612555439,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612501412,\"sunset\":1612536277},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
    // var wheather3="{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"base\":\"stations\",\"main\":{\"temp\":269.43,\"feels_like\":263.53,\"temp_min\":268.71,\"temp_max\":270.15,\"pressure\":1016,\"humidity\":59},\"visibility\":10000,\"wind\":{\"speed\":4,\"deg\":290},\"clouds\":{\"all\":0},\"dt\":1612612299,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612587724,\"sunset\":1612622776},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
    var wheather_parse = JSON.parse(forecast);
    var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);
    var temp = Math.round(wheather_parse.main.temp - 273, 15);
    var signigicant_wheather = 0;
    if (wheather_parse.weather[0].main === ('Rain')) {
        signigicant_wheather = 4;
    } else if (wheather_parse.weather[0].main === ('Clouds')) {
        signigicant_wheather = 1;
    } else if (wheather_parse.weather[0].main === ('Snow')) {
        signigicant_wheather = 5;
    } else if (wheather_parse.weather[0].main === ('Clear')) {
        signigicant_wheather = 0;//Clear
    }

    console.log(wheather_parse);
    var main = (wheather_parse.weather)[0].description;
    var wind = (wheather_parse.wind.speed);
    var wind_dir = (wheather_parse.wind.deg);
    var sunrise=(new Date(wheather_parse.sys.sunrise*1000).getHours()*60+(new Date(wheather_parse.sys.sunrise*1000).getMinutes()));
    var sunset=(new Date(wheather_parse.sys.sunset*1000).getHours()*60+(new Date(wheather_parse.sys.sunset*1000).getMinutes()));
    var nowtime=(new Date().getHours()*60+(new Date().getMinutes()));
    var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?255:100;

    function getMinMax(value, minOutput, maxOutput, maxInput) {
        var middle = 0;
        middle = Math.round((value - minOutput) * maxInput / (maxOutput - minOutput));
        return middle;
    }

    var ws8211 = "{\"from\":[0],\"to\":[88],\"type\":[1],\"dir\":[0],\"col\":[0],\"wh\":[128],\"br_\":[230],\"num\":1,\"sp\":254,\"dr\":255,\"fd\":4,\"fdt\":3,\"br\":255}";
    var JsonString = {};
    JsonString.from = [0];
    //JsonString.g1 = g1;
    JsonString.to = [41];
    JsonString.type = [signigicant_wheather];
    JsonString.dir = [wind_dir < 180 ? 0 : 1];
    JsonString.col = [getMinMax(temp, -20, 40, 255)];
    JsonString.wh = [255];
    JsonString.br_ = [isSunrise];
    JsonString.num = 1;
    JsonString.sp = getMinMax(wind, 0, 15, 255);
    JsonString.dr = 255;
    JsonString.fd = ((signigicant_wheather == 1) || (signigicant_wheather == 0)) ? 1 : 100;
    JsonString.fdt = 3;
    JsonString.br = 255;

    var url = "http://192.168.1.111/ws2811AJAX?json=";
    var AjaxFormat = url + JSON.stringify(JsonString);
    console.log(AjaxFormat);
    msg.url = AjaxFormat;
    return msg;
    console.log(AjaxFormat);
    msg.url = AjaxFormat;
}
var wheather=msg.payload;
//var wheather = "{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"},{\"id\":701,\"main\":\"Mist\",\"description\":\"mist\",\"icon\":\"50d\"}],\"base\":\"stations\",\"main\":{\"temp\":279.48,\"feels_like\":275.13,\"temp_min\":279.15,\"temp_max\":279.82,\"pressure\":1002,\"humidity\":100},\"visibility\":3500,\"wind\":{\"speed\":5,\"deg\":190},\"rain\":{\"1h\":0.11},\"clouds\":{\"all\":75},\"dt\":1612449242,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612415098,\"sunset\":1612449779},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
// var wheather2="{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"base\":\"stations\",\"main\":{\"temp\":267.1,\"feels_like\":257.04,\"temp_min\":267.04,\"temp_max\":267.15,\"pressure\":1018,\"humidity\":73},\"visibility\":10000,\"wind\":{\"speed\":10,\"deg\":320},\"clouds\":{\"all\":75},\"dt\":1612555439,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612501412,\"sunset\":1612536277},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
// var wheather3="{\"coord\":{\"lon\":34.9833,\"lat\":48.45},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"base\":\"stations\",\"main\":{\"temp\":269.43,\"feels_like\":263.53,\"temp_min\":268.71,\"temp_max\":270.15,\"pressure\":1016,\"humidity\":59},\"visibility\":10000,\"wind\":{\"speed\":4,\"deg\":290},\"clouds\":{\"all\":0},\"dt\":1612612299,\"sys\":{\"type\":1,\"id\":8901,\"country\":\"UA\",\"sunrise\":1612587724,\"sunset\":1612622776},\"timezone\":7200,\"id\":709930,\"name\":\"Dnipro\",\"cod\":200}";
var wheather_parse = JSON.parse(wheather);
var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);
var temp = Math.round(wheather_parse.main.temp - 273, 15);
var signigicant_wheather = 0;
if (wheather_parse.weather[0].main === ('Rain')) {
    signigicant_wheather = 4;
} else if (wheather_parse.weather[0].main === ('Clouds')) {
    signigicant_wheather = 1;
} else if (wheather_parse.weather[0].main === ('Snow')) {
    signigicant_wheather = 5;
} else if (wheather_parse.weather[0].main === ('Clear')) {
    signigicant_wheather = 0;//Clear
}

//console.log(wheather_parse.weather[0].main===('Clear'));
var main = (wheather_parse.weather)[0].description;
var wind = (wheather_parse.wind.speed);
var wind_dir = (wheather_parse.wind.deg);
var sunrise=(new Date(wheather_parse.sys.sunrise*1000).getHours()*60+(new Date(wheather_parse.sys.sunrise*1000).getMinutes()));
var sunset=(new Date(wheather_parse.sys.sunset*1000).getHours()*60+(new Date(wheather_parse.sys.sunset*1000).getMinutes()));
var nowtime=(new Date().getHours()*60+(new Date().getMinutes()));
var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?255:100;
//var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?:100;

function getMinMax(value, minOutput, maxOutput, maxInput) {
    var middle = 0;
    middle = Math.round((value - minOutput) * maxInput / (maxOutput - minOutput));
    return middle;
}

var ws8211 = "{\"from\":[0],\"to\":[88],\"type\":[1],\"dir\":[0],\"col\":[0],\"wh\":[128],\"br_\":[230],\"num\":1,\"sp\":254,\"dr\":255,\"fd\":4,\"fdt\":3,\"br\":255}";
var JsonString = {};

JsonString.from = [0];
//JsonString.g1 = g1;
JsonString.to = [41];
JsonString.type = [signigicant_wheather];
JsonString.dir = [wind_dir < 180 ? 0 : 1];
JsonString.col = [getMinMax(temp, -20, 40, 255)];
JsonString.wh = [255];
JsonString.br_ = [isSunrise];
JsonString.num = 1;
JsonString.sp = 15-getMinMax(wind, 0, 15, 255);
JsonString.dr = 255;
JsonString.fd = ((signigicant_wheather === 1) || (signigicant_wheather === 0)) ? 100 : 100;
JsonString.fdt = 3;
JsonString.br = 255;
var JsonString_bathroom = JsonString;
JsonString_bathroom.inv=1;
JsonString_bathroom.to = [88];
JsonString_bathroom.br = 20;
var msg_bathroom=msg;

var url = "http://192.168.1.111/ws2811AJAX?json=";
var url_bathroom = "http://192.168.1.112/ws2811AJAX?json=";
var AjaxFormat = url + JSON.stringify(JsonString);
var AjaxFormat_bathroom = url_bathroom + JSON.stringify(JsonString_bathroom);
console.log(AjaxFormat);
msg.url = AjaxFormat;
msg_bathroom.url=AjaxFormat_bathroom;
//return msg;
//console.log(AjaxFormat);
// msg.url = AjaxFormat;
var temp_obj={
    "payload":temp,
    "topic":"temp"
}
